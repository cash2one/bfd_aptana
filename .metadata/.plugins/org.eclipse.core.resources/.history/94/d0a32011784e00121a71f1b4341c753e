/**
 * @author Administrator
 */
$(function(){
	$('#sub').click(function(){
		$('#form1').submit()
	})
	$('body').keyup(function(event){
		if(event.keyCode===13){
			$('#form1').submit();
			}
	})
	var validater = $('#form1').validate({
		submitHandler: function(form){
			$(form).ajaxSubmit({
				success:function(responseText, statusText, xhr, $form){
					if(responseText=='4' ){
					  window.document.location.href = "/ifm/Account/user/!showUpdatePassword";
					} else if(responseText == '0'){
						validater.showErrors({'user.username':'密码与用户名不匹配'})
					} else if(responseText == '1'){
						validater.showErrors({'user.username':'邮箱格式错误，请重新输入'})
					} else if(responseText == '2'){
						validater.showErrors({'user.username':'密码与用户名不匹配'})
					} else if(responseText == '3'){
						validater.showErrors({'user.username':'服务器出错了'})
					}
				}
			})
			return false
			//form.submit()
		},
        rules: {
        	'user.username': {
            	 required: true,
                 email:true
             }
         },
         messages: {
        	 'user.username': {
                 required: "请输入邮箱",
                 email:'邮箱格式错误'
             }
         },
         focusInvalid:true,
         onkeyup: false,
         wrapper:null,
         errorElement:'span',
         errorPlacement: function(error, element){
             error.appendTo(element.parent());
         }
     })
})
